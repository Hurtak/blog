{% extends "../base.njk" %}

{% block title -%}
  &ndash; {{ metadata.title }}
{%- endblock %}

{% block content %}

  <article class="Article">

    <div class="Article-header">
      <h1 class="Article-title">
        {{ metadata.title }}
      </h1>
      <time
        class="Article-datetime"
        datetime="{{ metadata.date.publication | datetimeAttribute }}"
        title="{{ metadata.date.publication | fullDate }}"
      >
        {{ metadata.date.publication | dateHowLongBefore }}
      </time>
    </div>

    <div class="Article-content">
      {{ articleHtml | safe }}
    </div>

  </article>

{% endblock %}

{% block scriptVariables %}

  <script>
    (function () {
      'use strict'

      window.appData.snippets = [
        {% for snippetName, snippet in snippets %}
          {
            name: {{ snippetName | dump | safe }},
            head: {{ snippet.head | dump | safe }},
            html: {{ snippet.html | dump | safe }},
            css: {{ snippet.css | dump | safe }},
            js: {{ snippet.js | dump | safe }},
            config: {{ snippet.config | dump | safe }},
          }{% if loop.last == false %},{% endif %}
        {% endfor %}
      ]
    }())
  </script>

{% endblock %}
